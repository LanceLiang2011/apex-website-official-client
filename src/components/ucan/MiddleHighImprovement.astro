---
import BaseLayout from '../../layouts/BaseLayout.astro';
import type { Course, Center, Locale } from '../../data/types';
import { getRelativeLocaleUrl } from 'astro:i18n';
import { 
  Calculator, 
  BookOpen, 
  Atom, 
  FlaskConical, 
  Dna,
  Users,
  GraduationCap,
  ClipboardList,
  RefreshCw,
  BrainCircuit
} from 'lucide-astro';

interface Props {
  course: Course;
  center: Center;
  locale: Locale;
}

const { course, center, locale } = Astro.props;

// Syllabus Data
const syllabusData = {
  math: {
    g7_8: {
      title: { zh: '7-8年级数学', en: 'Grade 7-8 Math' },
      topics: [
        { title: { zh: '数与计数', en: 'Number / Numeracy' }, hours: 8, sub: [{ zh: '表达', en: 'Represent' }, { zh: '比较', en: 'Compare' }, { zh: '排序', en: 'Order numbers' }, { zh: '转换', en: 'Convert' }, { zh: '运算', en: 'Operation' }] },
        { title: { zh: '代数', en: 'Algebra' }, hours: 12, sub: [{ zh: '变量表达式', en: 'Expressions with variables' }, { zh: '合并同类项', en: 'Combine expressions' }, { zh: '方程', en: 'Equations' }, { zh: '不等式', en: 'Inequalities' }] },
        { title: { zh: '数据', en: 'Data' }, hours: 8, sub: [{ zh: '数据图表', en: 'Data representation' }, { zh: '平均数/中位数/众数', en: 'Mean/Median/Mode' }, { zh: '概率', en: 'Probability' }, { zh: '解读数据关系并得出结论', en: 'Interpret relationships & Draw conclusions' }] },
        { title: { zh: '测量与几何', en: 'Measurement and Geometry' }, hours: 8, sub: [{ zh: '属性', en: 'Properties' }, { zh: '变换', en: 'Transformation' }, { zh: '运动', en: 'Movement' }, { zh: '二维及三维测量', en: 'Measurement in 2D & 3D' }] },
        { title: { zh: '金融素养', en: 'Financial Literacy' }, hours: 4, sub: [] },
      ]
    },
    g9: {
      title: { zh: '9年级数学', en: 'Grade 9 Math' },
      topics: [
        { title: { zh: '有理数', en: 'Rational Numbers' }, hours: 4, sub: [{ zh: '分数的四则混合运算', en: 'Mixed operations involving fractions' }, { zh: '有理数的运算', en: 'Rational number operations' }] },
        { title: { zh: '幂与多项式', en: 'Powers and Polynomials' }, hours: 4, sub: [{ zh: '幂的运算', en: 'Multiplying and dividing powers' }, { zh: '多项式的运算', en: 'Polynomials' }] },
        { title: { zh: '线性关系', en: 'Linear Relations' }, hours: 4, sub: [{ zh: '线性关系', en: 'Linear relations' }, { zh: '线性与非线性的关系', en: 'Linear and nonlinear relations' }] },
        { title: { zh: '线性方程', en: 'Linear Equations' }, hours: 6, sub: [{ zh: '对线性方程的求解', en: 'Solving linear equations' }, { zh: '求解线性方程中的变量', en: 'Solving for a variable in a linear relation' }] },
        { title: { zh: '解析几何', en: 'Analytic Geometry' }, hours: 6, sub: [{ zh: '探究直线方程', en: 'Exploring the equation of a line' }, { zh: '求解直线方程', en: 'Determine the equation of a line' }, { zh: '线与线之间的关系', en: 'Parallel and perpendicular lines' }] },
        { title: { zh: '关系研究', en: 'Investigating Relationships' }, hours: 4, sub: [{ zh: '数据分析', en: 'Research on data' }, { zh: '数据解析', en: 'Reasoning about data' }] },
        { title: { zh: '平面几何', en: 'Properties of 2-D Figures' }, hours: 6, sub: [{ zh: '多边形的性质', en: 'Properties of polygons' }, { zh: '探究多边形', en: 'Exploring polygons' }] },
        { title: { zh: '立体几何', en: 'Measurement' }, hours: 6, sub: [{ zh: '确定表面积', en: 'Determining surface area' }, { zh: '探究表面积和表面积', en: 'Exploring volume and surface area' }] },
      ]
    },
    g10: {
      title: { zh: '10年级数学', en: 'Grade 10 Math' },
      topics: [
        { title: { zh: '线性方程', en: 'Systems of Linear Equations' }, hours: 6, sub: [{ zh: '求解线性方程', en: 'Solving linear equations' }, { zh: '线性方程的两种基础解法', en: 'Solving linear systems: substitution & elimination' }] },
        { title: { zh: '解析几何：线段与圆', en: 'Analytic Geometry: Line Segments and Circles' }, hours: 4, sub: [{ zh: '线段与圆的探究', en: 'Line segments and circles' }, { zh: '探究几何图形的性质', en: 'Exploring properties of geometric figures' }] },
        { title: { zh: '二次等式', en: 'Graphs of Quadratic Relations' }, hours: 6, sub: [{ zh: '探究二次等式', en: 'Exploring quadratic relations' }, { zh: '二次等式的扩展', en: 'Expanding quadratic expressions' }] },
        { title: { zh: '代数式的因式分解', en: 'Factoring Algebraic Expressions' }, hours: 4, sub: [{ zh: '二次等式的因式分解', en: 'Factoring quadratics' }, { zh: '多项式因式分解', en: 'Factoring polynomials' }] },
        { title: { zh: '二次函数模型的应用', en: 'Applying Quadratic Models' }, hours: 4, sub: [{ zh: '二次函数的变换', en: 'Translations of quadratic relations' }, { zh: '二次函数顶点式', en: 'Quadratic models using vertex form' }] },
        { title: { zh: '二次等式', en: 'Quadratic Equations' }, hours: 6, sub: [{ zh: '求解二次等式', en: 'Solving quadratic equations' }, { zh: '通过二次函数模型解决问题', en: 'Solving problems using quadratic models' }] },
        { title: { zh: '相似三角形与三角学', en: 'Similar Triangles and Trigonometry' }, hours: 4, sub: [{ zh: '探究相似三角形', en: 'Solving Similar Triangle Problems' }, { zh: '探究直角三角形', en: 'Solving Right Triangle Problems' }] },
        { title: { zh: '锐角三角形', en: 'Acute Triangle Trigonometry' }, hours: 6, sub: [{ zh: '正弦定理', en: 'Sine Law' }, { zh: '余弦定理', en: 'Cosine Law' }] },
      ]
    },
    g11: {
      title: { zh: '11年级数学', en: 'Grade 11 Math' },
      topics: [
        { title: { zh: '函数的介绍', en: 'Introduction to Functions' }, hours: 6, sub: [{ zh: '探究函数的性质', en: 'Exploring properties of parent functions' }, { zh: '探究定义域与值域', en: 'Determining the domain and range of a function' }, { zh: '函数的变换', en: 'Exploring transformations of parent functions' }, { zh: '函数图像的绘制', en: 'Using transformations to graph functions' }] },
        { title: { zh: '等价代数式的表达', en: 'Equivalent Algebraic Expressions' }, hours: 4, sub: [{ zh: '多项式的四则混合运算', en: 'The arithmetic operations involving polynomials' }, { zh: '分式的混合运算', en: 'The arithmetic operations involving rational expressions' }] },
        { title: { zh: '二次函数', en: 'Quadratic Functions' }, hours: 4, sub: [{ zh: '二次函数的性质', en: 'Properties of quadratic functions' }, { zh: '解二次函数', en: 'Solving quadratic equations' }] },
        { title: { zh: '幂函数与指数函数', en: 'Power functions and Exponential Functions' }, hours: 6, sub: [{ zh: '幂函数', en: 'Power functions' }, { zh: '指数函数', en: 'Exponential functions' }] },
        { title: { zh: '三角函数', en: 'Trigonometric Functions' }, hours: 10, sub: [{ zh: '初级三角函数', en: 'Basic trigonometric functions' }, { zh: '高级三角函数', en: 'Advanced trigonometric functions' }] },
        { title: { zh: '数列', en: 'Discrete Functions: Sequences and Series' }, hours: 6, sub: [{ zh: '等差数列', en: 'Arithmetic series' }, { zh: '等比数列', en: 'Geometric series' }] },
        { title: { zh: '数列在金融学的应用', en: 'Discrete Functions: Financial Applications' }, hours: 4, sub: [{ zh: '单利问题', en: 'Simple interest problems' }, { zh: '年利问题', en: 'Annuities: Future value & Present value' }] },
      ]
    },
    g12_mcv4u: {
      title: { zh: '12年级数学 (MCV4U)', en: 'Grade 12 Math (MCV4U)' },
      topics: [
        { title: { zh: '微积分导论', en: 'Introduction to Calculus' }, hours: 6, sub: [{ zh: '变换率', en: 'Rates of change' }, { zh: '极限', en: 'Limits' }] },
        { title: { zh: '导数', en: 'Derivatives' }, hours: 6, sub: [{ zh: '导数函数', en: 'Derivative function' }, { zh: '复合函数求导', en: 'The derivatives of composite functions' }] },
        { title: { zh: '导数及其应用', en: 'Derivatives and their Applications' }, hours: 4, sub: [{ zh: '高阶导数，速度与加速度', en: 'Higher order derivatives, velocity and acceleration' }, { zh: '最大值最小值问题', en: 'Minimum and maximum' }, { zh: '问题的优化', en: 'Optimization problems' }] },
        { title: { zh: '图像的绘制', en: 'Curve Sketching' }, hours: 4, sub: [{ zh: '函数的性质', en: 'Properties of functions' }, { zh: '函数的凹凸与拐点', en: 'Concavity and points of inflection' }] },
        { title: { zh: '指数函数与三角函数的求导', en: 'Derivatives of Exponential and Trigonometric Functions' }, hours: 4, sub: [{ zh: '指数函数的求导', en: 'Derivatives of exponential functions' }, { zh: '三角函数的求导', en: 'Derivatives of trigonometric functions' }] },
        { title: { zh: '向量导论', en: 'An Introduction to Vectors' }, hours: 4, sub: [{ zh: '研究向量及其计算', en: 'Vectors' }, { zh: '二维和三维向量的运算', en: 'Operations with vectors in R2 and R3' }] },
        { title: { zh: '向量的应用', en: 'Applications of Vectors' }, hours: 4, sub: [{ zh: '向量的点积', en: 'The dot product of vectors' }, { zh: '向量的叉乘', en: 'The cross product of vectors' }] },
        { title: { zh: '直线与平面方程', en: 'Equations of Lines and Planes' }, hours: 4, sub: [{ zh: '直线笛卡尔方程', en: 'Cartesian equation of a line' }, { zh: '平面笛卡尔方程', en: 'Cartesian equation of a plane' }] },
        { title: { zh: '点，线与面之间的关系', en: 'Relationships Between Points, Lines and Planes' }, hours: 4, sub: [{ zh: '等式系统', en: 'Systems of equations' }, { zh: '点到直线/面的距离', en: 'The distance from a point to a line/a plane' }] },
      ]
    },
    g12_mhf4u: {
      title: { zh: '12年级数学 (MHF4U)', en: 'Grade 12 Math (MHF4U)' },
      topics: [
        { title: { zh: '函数的特征与性质', en: 'Functions: Characteristics and Properties' }, hours: 4, sub: [{ zh: '探究绝对值', en: 'Exploring absolute value' }, { zh: '探究函数的运算', en: 'Exploring operations with functions' }] },
        { title: { zh: '函数的变换率', en: 'Functions: Understanding Rates of Change' }, hours: 4, sub: [{ zh: '平均和瞬时变化率', en: 'Average rate of change & instantaneous rate of change' }, { zh: '利用变化率解决问题', en: 'Problems solving' }] },
        { title: { zh: '多项式函数', en: 'Polynomial Functions' }, hours: 4, sub: [{ zh: '多项式性质', en: 'Characteristics of polynomial functions' }, { zh: '分解和提取多项式', en: 'Dividing and factoring polynomials' }] },
        { title: { zh: '多项式等式与不等式', en: 'Polynomial Equations and Inequalities' }, hours: 4, sub: [{ zh: '多项式等式', en: 'Polynomial equations' }, { zh: '多项式不等式', en: 'Polynomial inequations' }] },
        { title: { zh: '有理函数的等式与不等式', en: 'Rational Functions, Equations, and Inequalities' }, hours: 4, sub: [{ zh: '有理函数的图像', en: 'Graphs of rational functions' }, { zh: '有理不等式的求解', en: 'Solving rational inequalities' }] },
        { title: { zh: '三角函数', en: 'Trigonometric Functions' }, hours: 4, sub: [{ zh: '探究三角函数图像', en: 'Exploring graphs of trigonometric functions' }, { zh: '利用三号函数建模', en: 'Modelling with trigonometric functions' }] },
        { title: { zh: '三角函数等式与方程', en: 'Trigonometric Identities and Equations' }, hours: 4, sub: [{ zh: '探索三角函数', en: 'Exploring trigonometric functions' }, { zh: '解三角函数等式', en: 'Solving trigonometric equations' }] },
        { title: { zh: '指数与对数方程', en: 'Exponential and Logarithmic Functions' }, hours: 6, sub: [{ zh: '探究对数函数', en: 'Exploring the logarithmic function' }, { zh: '解决指数与对数函数问题', en: 'Solving exponential and logarithmic function problems' }] },
        { title: { zh: '函数的结合', en: 'Combinations of Functions' }, hours: 6, sub: [{ zh: '函数的结合', en: 'Combinations of functions' }, { zh: '函数等式与不等式的解决', en: 'Techniques for solving equations and inequalities' }] },
      ]
    }
  },
  english: {
    g6_8: {
      title: { zh: '6-8年级 阅读与词汇', en: 'Grade 6-8 Reading & Vocabulary' },
      topics: [
        { title: { zh: '词汇积累与运用', en: 'Vocabulary Building & Usage' }, hours: 6, sub: [{ zh: '词根词缀记忆法', en: 'Root words, prefixes, and suffixes' }, { zh: '语境中的词义推测', en: 'Context clues for vocabulary' }] },
        { title: { zh: '阅读理解策略', en: 'Reading Comprehension Strategies' }, hours: 6, sub: [{ zh: '主旨大意与细节捕捉', en: 'Main ideas and supporting details' }, { zh: '推断与结论', en: 'Making inferences and drawing conclusions' }] },
        { title: { zh: '文学作品赏析', en: 'Literary Analysis' }, hours: 6, sub: [{ zh: '小说要素分析（人物、情节、环境）', en: 'Elements of fiction (character, plot, setting)' }, { zh: '修辞手法识别', en: 'Identifying figurative language' }] },
        { title: { zh: '非虚构类文本阅读', en: 'Non-Fiction Reading' }, hours: 6, sub: [{ zh: '新闻与社论分析', en: 'Analyzing news and editorials' }, { zh: '观点与论据识别', en: 'Identifying arguments and evidence' }] },
        { title: { zh: '基础写作技巧', en: 'Basic Writing Skills' }, hours: 6, sub: [{ zh: '句子结构多样化', en: 'Sentence variety and structure' }, { zh: '段落构建与过渡', en: 'Paragraph development and transitions' }] },
      ]
    },
    g9_12: {
      title: { zh: '9-12年级 语法与学术写作提高班', en: 'Grade 9-12 Grammar & Academic Writing' },
      topics: [
        { title: { zh: '英语基础与句子核心', en: 'English Fundamentals & Sentence Core' }, hours: 6, sub: [{ zh: '英语句子结构总览', en: 'English sentence structure overview' }, { zh: '八大词类与句子成分', en: 'Eight parts of speech & sentence elements' }, { zh: '基本句型与扩展方式', en: 'Basic sentence patterns & expansion' }] },
        { title: { zh: '动词系统与时态语态', en: 'Verb System & Tenses' }, hours: 8, sub: [{ zh: '动词概念与谓语结构', en: 'Verb concepts & predicate structure' }, { zh: '英语时态体系', en: 'English tense system' }, { zh: '被动语态与写作表达', en: 'Passive voice & writing expression' }] },
        { title: { zh: '非谓语与从句', en: 'Non-finite Verbs & Clauses' }, hours: 10, sub: [{ zh: '非谓语动词概述', en: 'Non-finite verbs overview' }, { zh: '非谓语动词进阶应用', en: 'Advanced non-finite verb usage' }, { zh: '名词性从句', en: 'Noun clauses' }, { zh: '定语从句', en: 'Relative clauses' }, { zh: '状语从句', en: 'Adverbial clauses' }] },
        { title: { zh: '语法难点与句式提升', en: 'Grammar Challenges & Sentence Enhancement' }, hours: 6, sub: [{ zh: '虚拟语气', en: 'Subjunctive mood' }, { zh: '倒装与强调结构', en: 'Inversion & emphatic structures' }, { zh: '一致性与易错点', en: 'Agreement & common errors' }] },
        { title: { zh: '写作专项训练', en: 'Writing Skills Training' }, hours: 8, sub: [{ zh: '段落写作结构', en: 'Paragraph writing structure' }, { zh: '常见写作体裁（一）', en: 'Common writing genres (Part 1)' }, { zh: '常见写作体裁（二）', en: 'Common writing genres (Part 2)' }, { zh: '写作语言升级', en: 'Writing language enhancement' }] },
        { title: { zh: '综合写作与总结', en: 'Comprehensive Writing & Review' }, hours: 2, sub: [{ zh: '综合语法与写作运用', en: 'Integrated grammar & writing application' }, { zh: '模拟考试写作', en: 'Mock exam writing' }, { zh: '个性化反馈与改进建议', en: 'Personalized feedback & improvement' }] },
      ]
    }
  },
  chemistry: {
    g11: {
      title: { zh: '11年级化学 (SCH3U)', en: 'Grade 11 Chemistry (SCH3U)' },
      topics: [
        { title: { zh: '科学探究技能', en: 'Scientific Investigation Skills' }, hours: 2 },
        { title: { zh: '物质、化学趋势与化学键', en: 'Matter, Chemical Trends, and Chemical Bonding' }, hours: 4 },
        { title: { zh: '化学反应', en: 'Chemical Reactions' }, hours: 4 },
        { title: { zh: '化学反应中的物质的量（化学计量）', en: 'Quantities in Chemical Reactions (Stoichiometry)' }, hours: 6 },
        { title: { zh: '溶液与溶解度', en: 'Solutions and Solubility' }, hours: 4 },
        { title: { zh: '气体与大气化学', en: 'Gases and Atmospheric Chemistry' }, hours: 4 },
      ]
    },
    g12: {
      title: { zh: '12年级化学 (SCH4U)', en: 'Grade 12 Chemistry (SCH4U)' },
      topics: [
        { title: { zh: '有机化学', en: 'Organic Chemistry' }, hours: 4 },
        { title: { zh: '物质的结构与性质', en: 'Structure and Properties of Matter' }, hours: 4 },
        { title: { zh: '能量改变及化学反应速率', en: 'Energy Changes and Rates of Reaction' }, hours: 6 },
        { title: { zh: '化学系统与平衡', en: 'Chemical Systems and Equilibrium' }, hours: 4 },
        { title: { zh: '电化学', en: 'Electrochemistry' }, hours: 6 },
      ]
    }
  },
  physics: {
    g11: {
      title: { zh: '11年级物理', en: 'Grade 11 Physics' },
      topics: [
        { title: { zh: '运动学', en: 'Kinematics' }, hours: 8, sub: [{ zh: '直线运动', en: 'Motion in a Straight Line' }, { zh: '二维运动', en: 'Motion in Two Dimensions' }] },
        { title: { zh: '力学', en: 'Forces' }, hours: 6, sub: [{ zh: '牛顿运动定律', en: 'Newton’s Laws of Motion' }, { zh: '力的应用', en: 'Applications of Forces' }] },
        { title: { zh: '能量与社会', en: 'Energy and Society' }, hours: 8, sub: [{ zh: '功，能量，功率与社会', en: 'Work, Energy, Power, and Society' }, { zh: '热能和社会', en: 'Thermal Energy and Society' }, { zh: '核能与社会', en: 'Nuclear Energy and Society' }] },
        { title: { zh: '波与声', en: 'Waves and Sound' }, hours: 6, sub: [{ zh: '震动与波', en: 'Vibrations and Waves' }, { zh: '波的相互干扰', en: 'Wave Interactions' }, { zh: '波的应用', en: 'Applications of Waves' }] },
        { title: { zh: '电场与磁场', en: 'Electricity and Magnetism' }, hours: 12, sub: [{ zh: '电场', en: 'Electricity and Its Production' }, { zh: '磁场', en: 'Electromagnetism' }, { zh: '电磁感应', en: 'Electromagnetic Induction' }] },
      ]
    },
    g12: {
      title: { zh: '12年级物理', en: 'Grade 12 Physics' },
      topics: [
        { title: { zh: '动力学', en: 'Dynamics' }, hours: 12, sub: [{ zh: '运动学', en: 'Kinematics' }, { zh: '动力学', en: 'Dynamics' }, { zh: '匀速圆周运动', en: 'Uniform Circular Motion' }] },
        { title: { zh: '能量与动量', en: 'Energy and Momentum' }, hours: 6, sub: [{ zh: '功和能', en: 'Energy and Momentum' }, { zh: '动量与碰撞', en: 'Momentum and Collisions' }] },
        { title: { zh: '重力场，电场和磁场', en: 'Gravitational, Electric, and Magnetic Fields' }, hours: 12, sub: [{ zh: '重力场', en: 'Gravitational Fields' }, { zh: '电场', en: 'Electric Fields' }, { zh: '磁场', en: 'Magnetic Fields' }] },
        { title: { zh: '光的波动性质', en: 'The Wave Nature of Light' }, hours: 4, sub: [{ zh: '波与光', en: 'Waves and Light' }, { zh: '光的波动性质的应用', en: 'Applications of the Wave Nature of Light' }] },
        { title: { zh: '现代物理学的革新', en: 'Revolutions in Modern Physics' }, hours: 4, sub: [{ zh: '相对论', en: 'Relativity' }, { zh: '量子力学', en: 'Quantum Mechanics' }] },
      ]
    }
  },
  biology: {
    g11: {
      title: { zh: '11年级生物', en: 'Grade 11 Biology' },
      topics: [
        { title: { zh: '生物多样性', en: 'Diversity of Living Things' }, hours: 3, sub: [{ zh: '分类学', en: 'Taxonomy' }, { zh: '病毒、细菌与原生生物', en: 'Viruses, Bacteria, and Protists' }] },
        { title: { zh: '遗传过程', en: 'Genetic Processes' }, hours: 3, sub: [{ zh: '细胞分裂', en: 'Cell Division' }, { zh: '孟德尔遗传学', en: 'Mendelian Genetics' }] },
        { title: { zh: '进化', en: 'Evolution' }, hours: 3, sub: [{ zh: '进化理论', en: 'Theory of Evolution' }, { zh: '进化的机制', en: 'Mechanisms of Evolution' }] },
        { title: { zh: '动物结构与功能', en: 'Animals: Structure and Function' }, hours: 4, sub: [{ zh: '消化系统', en: 'Digestive System' }, { zh: '呼吸系统', en: 'Respiratory System' }, { zh: '循环系统', en: 'Circulatory System' }] },
        { title: { zh: '植物结构与功能', en: 'Plants: Anatomy, Growth, and Function' }, hours: 3, sub: [{ zh: '植物组织', en: 'Plant Tissues' }, { zh: '植物生长与繁殖', en: 'Plant Growth and Reproduction' }] },
      ]
    },
    g12: {
      title: { zh: '12年级生物', en: 'Grade 12 Biology' },
      topics: [
        { title: { zh: '生物化学', en: 'Biochemistry' }, hours: 3, sub: [{ zh: '生物大分子', en: 'Biological Macromolecules' }, { zh: '酶与代谢', en: 'Enzymes and Metabolism' }] },
        { title: { zh: '代谢过程', en: 'Metabolic Processes' }, hours: 4, sub: [{ zh: '细胞呼吸', en: 'Cellular Respiration' }, { zh: '光合作用', en: 'Photosynthesis' }] },
        { title: { zh: '分子遗传学', en: 'Molecular Genetics' }, hours: 4, sub: [{ zh: 'DNA 结构与复制', en: 'DNA Structure and Replication' }, { zh: '蛋白质合成', en: 'Protein Synthesis' }] },
        { title: { zh: '体内平衡', en: 'Homeostasis' }, hours: 3, sub: [{ zh: '神经系统', en: 'Nervous System' }, { zh: '内分泌系统', en: 'Endocrine System' }] },
        { title: { zh: '种群动态', en: 'Population Dynamics' }, hours: 2, sub: [{ zh: '种群增长模型', en: 'Population Growth Models' }, { zh: '人类人口', en: 'Human Population' }] },
      ]
    }
  }
};

const subjects = [
  {
    id: 'math',
    name: { zh: '数学', en: 'Math' },
    icon: Calculator,
    levels: [
      { label: { zh: '9年级', en: 'Grade 9' }, key: 'g9' },
      { label: { zh: '10年级', en: 'Grade 10' }, key: 'g10' },
      { label: { zh: '11年级', en: 'Grade 11' }, key: 'g11' },
      { label: { zh: '12年级 (MCV4U)', en: 'Grade 12 (MCV4U)' }, key: 'g12_mcv4u' },
      { label: { zh: '12年级 (MHF4U)', en: 'Grade 12 (MHF4U)' }, key: 'g12_mhf4u' },
    ]
  },
  {
    id: 'english',
    name: { zh: '英语', en: 'English' },
    icon: BookOpen,
    levels: [
      { label: { zh: '6-8年级 阅读与词汇', en: 'Grade 6-8 Reading & Vocabulary' }, key: 'g6_8' },
      { label: { zh: '9-12年级 语法与写作', en: 'Grade 9-12 Grammar & Writing' }, key: 'g9_12' },
    ]
  },
  {
    id: 'physics',
    name: { zh: '物理', en: 'Physics' },
    icon: Atom,
    levels: [
      { label: { zh: '11年级', en: 'Grade 11' }, key: 'g11' },
      { label: { zh: '12年级', en: 'Grade 12' }, key: 'g12' },
    ]
  },
  {
    id: 'chemistry',
    name: { zh: '化学', en: 'Chemistry' },
    icon: FlaskConical,
    levels: [
      { label: { zh: '11年级', en: 'Grade 11' }, key: 'g11' },
      { label: { zh: '12年级', en: 'Grade 12' }, key: 'g12' },
    ]
  },
  {
    id: 'biology',
    name: { zh: '生物', en: 'Biology' },
    icon: Dna,
    levels: [
      { label: { zh: '11年级', en: 'Grade 11' }, key: 'g11' },
      { label: { zh: '12年级', en: 'Grade 12' }, key: 'g12' },
    ]
  }
];

const highlights = [
  {
    title: { zh: '6人小班授课', en: 'Small Class Size (6 Students)' },
    icon: Users
  },
  {
    title: { zh: '名师专业辅导', en: 'Expert Tutoring' },
    icon: GraduationCap
  },
  {
    title: { zh: '作业全程跟踪', en: 'Homework Tracking' },
    icon: ClipboardList
  },
  {
    title: { zh: '校内进度同步', en: 'School Sync' },
    icon: RefreshCw
  },
  {
    title: { zh: '重难知识巩固', en: 'Knowledge Consolidation' },
    icon: BrainCircuit
  }
];

---

<BaseLayout title={`${course.name[locale]} - ${center.name[locale]}`}>
  <!-- Hero Section -->
  <section class="bg-gray-900 text-white pt-32 pb-16">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row gap-8 items-start">
        <div class="grow">
          <div class="flex gap-2 mb-4">
            <a href={getRelativeLocaleUrl(locale, center.slug)} class="text-blue-300 hover:text-white transition-colors">
              {center.name[locale]}
            </a>
            <span class="text-gray-500">/</span>
            <span class="text-gray-400">{course.name[locale]}</span>
          </div>
          <h1 class="text-3xl md:text-4xl font-bold mb-4">{course.name[locale]}</h1>
          <p class="text-xl text-gray-300 mb-6 max-w-3xl">{course.shortDescription[locale]}</p>
          
          <div class="flex flex-wrap gap-4">
            {course.tags?.map(tag => (
              <span class="bg-gray-800 text-gray-300 px-3 py-1 rounded-full text-sm border border-gray-700">
                {tag[locale]}
              </span>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Highlights Section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12 text-gray-900">
        {locale === 'zh' ? '课程亮点' : 'Course Highlights'}
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-8">
        {highlights.map(highlight => (
          <div class="flex flex-col items-center text-center group">
            <div class="w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center text-primary-blue mb-4 group-hover:bg-primary-blue group-hover:text-white transition-all duration-300">
              <highlight.icon class="w-8 h-8" />
            </div>
            <h3 class="font-bold text-gray-900">{highlight.title[locale]}</h3>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Syllabus Section -->
  <section class="py-16 bg-gray-50 min-h-[600px]">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12 text-gray-900">
        {locale === 'zh' ? '课程大纲' : 'Course Syllabus'}
      </h2>
      
      <!-- Top Tabs (Subjects) -->
      <div class="flex flex-wrap gap-2 mb-8 border-b border-gray-200 pb-1 justify-start">
        {subjects.map((subject, index) => (
          <button
            class={`subject-tab-btn px-6 py-3 rounded-t-lg font-bold text-sm md:text-base transition-all duration-200 flex items-center gap-2 ${
              index === 0 
                ? 'bg-white text-primary-blue border-t border-x border-gray-200 shadow-sm -mb-px active' 
                : 'bg-gray-100 text-gray-500 hover:bg-gray-200 hover:text-gray-700'
            }`}
            data-subject={subject.id}
          >
            <subject.icon class="w-4 h-4" />
            {subject.name[locale]}
          </button>
        ))}
      </div>

      <!-- Subject Content Panels -->
      {subjects.map((subject, index) => (
        <div id={`subject-content-${subject.id}`} class={`subject-content ${index === 0 ? '' : 'hidden'}`}>
          <div class="flex flex-col lg:flex-row gap-8">
            
            <!-- Left Sidebar: Vertical Tabs -->
            <div class="w-full lg:w-1/4 shrink-0">
              <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden sticky top-24">
                <div class="p-4 bg-gray-50 border-b border-gray-100">
                  <h3 class="font-bold text-gray-900">{locale === 'zh' ? '年级/课程' : 'Grade/Course'}</h3>
                </div>
                <div class="flex flex-col">
                  {subject.levels.map((level, lvlIndex) => (
                    <button
                      class={`level-tab-btn text-left px-6 py-4 border-b border-gray-100 last:border-0 hover:bg-blue-50 transition-colors duration-200 focus:outline-none flex items-center gap-3 group ${
                        lvlIndex === 0 ? 'active bg-blue-50' : ''
                      }`}
                      data-target={`${subject.id}-${level.key}`}
                    >
                      <div class={`icon-box w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${lvlIndex === 0 ? 'bg-primary-blue text-white' : 'bg-gray-100 text-gray-500 group-hover:bg-white group-hover:text-primary-blue'}`}>
                        <subject.icon class="w-4 h-4" />
                      </div>
                      <span class="font-medium text-gray-700 group-[.active]:text-primary-blue transition-colors">
                        {level.label[locale]}
                      </span>
                    </button>
                  ))}
                </div>
              </div>
            </div>

            <!-- Right Content: Syllabus -->
            <div class="w-full lg:w-3/4">
              {subject.levels.map((level, lvlIndex) => {
                const data = (syllabusData as any)[subject.id]?.[level.key];
                if (!data) return null;

                return (
                <div id={`level-content-${subject.id}-${level.key}`} class={`level-content ${lvlIndex === 0 ? '' : 'hidden'} animate-fadeIn`}>
                  <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="p-8 border-b border-gray-100 bg-linear-to-r from-gray-50 to-white">
                      <div class="flex items-center gap-4 mb-2">
                        <div class="w-12 h-12 bg-primary-blue text-white rounded-xl flex items-center justify-center shadow-lg shadow-blue-200">
                          <subject.icon class="w-6 h-6" />
                        </div>
                        <div>
                          <h2 class="text-2xl font-bold text-gray-900">{data.title[locale]}</h2>
                          <p class="text-gray-500 text-sm">{subject.name[locale]}</p>
                        </div>
                      </div>
                    </div>
                    
                    <div class="p-8">
                      <div class="overflow-x-auto">
                        <table class="w-full text-left border-collapse">
                          <thead>
                            <tr>
                              <th class="py-4 px-4 bg-gray-50 font-bold text-gray-900 border-b border-gray-200 w-2/3 rounded-tl-lg">
                                {locale === 'zh' ? '课题' : 'Topic'}
                              </th>
                              <th class="py-4 px-4 bg-gray-50 font-bold text-gray-900 border-b border-gray-200 w-1/3 rounded-tr-lg text-right">
                                {locale === 'zh' ? '课时' : 'Hours'}
                              </th>
                            </tr>
                          </thead>
                          <tbody class="divide-y divide-gray-100">
                            {data.topics.map((topic: any, i: number) => (
                              <tr class="hover:bg-gray-50 transition-colors group">
                                <td class="py-4 px-4 align-top">
                                  <div class="flex items-start gap-3">
                                    <span class="shrink-0 w-6 h-6 bg-blue-50 text-primary-blue rounded-full flex items-center justify-center text-xs font-bold group-hover:bg-primary-blue group-hover:text-white transition-colors mt-0.5">
                                      {i + 1}
                                    </span>
                                    <div>
                                        <span class="font-bold text-gray-800 block">{topic.title[locale]}</span>
                                        {topic.sub && (
                                            <ul class="mt-2 list-disc pl-4 text-sm text-gray-600 space-y-1">
                                                {topic.sub.map((s: any) => <li>{s[locale]}</li>)}
                                            </ul>
                                        )}
                                    </div>
                                  </div>
                                </td>
                                <td class="py-4 px-4 text-right text-gray-600 font-mono align-top">
                                  {topic.hours > 0 ? `${topic.hours}${locale === 'zh' ? '课时' : ' Hrs'}` : '-'}
                                </td>
                              </tr>
                            ))}
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              )})}
            </div>

          </div>
        </div>
      ))}

    </div>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Subject Tabs Logic
      const subjectTabs = document.querySelectorAll('.subject-tab-btn');
      const subjectContents = document.querySelectorAll('.subject-content');

      subjectTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const targetId = tab.getAttribute('data-subject');
          if (!targetId) return;
          
          // Update Tabs
          subjectTabs.forEach(t => {
            t.classList.remove('bg-white', 'text-primary-blue', 'border-t', 'border-x', 'shadow-sm', '-mb-px', 'active');
            t.classList.add('bg-gray-100', 'text-gray-500');
          });
          tab.classList.remove('bg-gray-100', 'text-gray-500');
          tab.classList.add('bg-white', 'text-primary-blue', 'border-t', 'border-x', 'shadow-sm', '-mb-px', 'active');

          // Update Content
          subjectContents.forEach(c => c.classList.add('hidden'));
          document.getElementById(`subject-content-${targetId}`)?.classList.remove('hidden');
        });
      });

      // Level Tabs Logic
      const levelTabs = document.querySelectorAll('.level-tab-btn');
      
      levelTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const targetId = tab.getAttribute('data-target'); // e.g. math-g9
          if (!targetId) return;

          const subjectId = targetId.split('-')[0]; // e.g. math
          const container = document.getElementById(`subject-content-${subjectId}`);
          if (!container) return;
          
          // Update Level Tabs in this container
          container.querySelectorAll('.level-tab-btn').forEach(t => {
            t.classList.remove('active', 'bg-blue-50');
            const iconBox = t.querySelector('.icon-box');
            iconBox?.classList.remove('bg-primary-blue', 'text-white');
            iconBox?.classList.add('bg-gray-100', 'text-gray-500');
          });
          
          tab.classList.add('active', 'bg-blue-50');
          const iconBox = tab.querySelector('.icon-box');
          iconBox?.classList.remove('bg-gray-100', 'text-gray-500');
          iconBox?.classList.add('bg-primary-blue', 'text-white');

          // Update Level Content
          container.querySelectorAll('.level-content').forEach(c => c.classList.add('hidden'));
          document.getElementById(`level-content-${targetId}`)?.classList.remove('hidden');
        });
      });
    });
  </script>

</BaseLayout>
